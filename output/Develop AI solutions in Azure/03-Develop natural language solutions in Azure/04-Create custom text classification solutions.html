<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create custom text classification solutions</title>
    <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1 { color: #0078d4; border-bottom: 2px solid #0078d4; padding-bottom: 10px; }
    h2 { color: #333; margin-top: 40px; border-bottom: 1px solid #ddd; padding-bottom: 8px; }
    .section { margin-bottom: 40px; }
    .section-header { background: #f5f5f5; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    .section-header a { color: #0078d4; text-decoration: none; }
    .section-header a:hover { text-decoration: underline; }
    img { max-width: 100%; height: auto; }
    pre { background: #f4f4f4; padding: 15px; overflow-x: auto; border-radius: 5px; }
    code { background: #f4f4f4; padding: 2px 5px; border-radius: 3px; }
    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f5f5f5; }
    .NOTE, .TIP { padding: 12px 15px; margin: 15px 0; border-radius: 5px; border-left: 4px solid; }
    .NOTE { background-color: #e7f3ff; border-color: #0078d4; }
    .NOTE > p:first-child { font-weight: bold; color: #0078d4; margin-top: 0; }
    .TIP { background-color: #e8f5e9; border-color: #4caf50; }
    .TIP > p:first-child { font-weight: bold; color: #2e7d32; margin-top: 0; }
</style>
</head>
<body>
    <h1>Create custom text classification solutions</h1>

    <div class="section">
        <div class="section-header">
            <h2>1. Introduction</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/1-introduction">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/1-introduction</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Introduction</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.introduction">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">1 minute</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div id="module-unit-content">
<p><em>Natural language processing</em> (NLP) is one of the most common AI problems, where software must interpret text or speech in the natural form that humans use. Part of NLP is the ability to classify text, and Azure provides ways to classify text including sentiment, language, and custom categories defined by the user.</p>
<p>In this module, you'll learn how to use the Azure Language service to classify text into custom groups.</p>
<p>After completing this module, you'll be able to:</p>
<ul>
<li>Understand types of classification projects.</li>
<li>Build a custom text classification project.</li>
<li>Tag data, train, and deploy a model.</li>
<li>Submit classification tasks from your own app.</li>
</ul>
</div>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>

    <div class="section">
        <div class="section-header">
            <h2>2. Understand types of classification projects</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/2-understand-types-of-classification-projects">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/2-understand-types-of-classification-projects</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Understand types of classification projects</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.understand-types-of-classification-projects">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">6 minutes</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div id="module-unit-content">
<p>Custom text classification assigns labels, which in the Azure Language service is a <em>class</em> that the developer defines, to text files. For example, a video game summary might be classified as "Adventure", "Strategy", "Action" or "Sports".</p>
<p>Custom text classification falls into two types of projects:</p>
<ul>
<li><strong>Single label classification</strong> - you can assign only one class to each file. Following the above example, a video game summary could only be classified as "Adventure" or "Strategy".</li>
<li><strong>Multiple label classification</strong> - you can assign multiple classes to each file. This type of project would allow you to classify a video game summary as "Adventure" or "Adventure and Strategy".</li>
</ul>
<p>When creating your custom text classification project, you can specify which project you want to build.</p>
<h2 id="single-vs-multiple-label-projects">Single vs. multiple label projects</h2>
<p>Beyond the ability to put files into multiple classifications, the key differences with multiple label classification projects are labeling, considerations for improving your model, and the API payload for classification tasks.</p>
<h3 id="labeling-data">Labeling data</h3>
<p>In single label projects, each file is assigned one class during the labeling process; class assignment in Azure Language only allows you to select one class.</p>
<p>When labeling multiple label projects, you can assign as many classes that you want per file. The impact of the added complexity means your data has to remain clear and provide a good distribution of possible inputs for your model to learn from.</p>
<p><span class="mx-imgBorder">
<a data-linktype="relative-path" href="../../wwl-data-ai/custom-text-classification/media/single-multiple-graphic.png#lightbox">
<img alt="Conceptual diagram that shows mapping of documents to labels for single label and multiple label classifications." data-linktype="relative-path" src="https://learn.microsoft.com/en-us/training/wwl-data-ai/custom-text-classification/media/single-multiple-graphic-small.png"/>
</a>
</span>
</p>
<p>Labeling data correctly, especially for multiple label projects, is directly correlated with how well your model performs. The higher the quality, clarity, and variation of your data set is, the more accurate your model will be.</p>
<h3 id="evaluating-and-improving-your-model">Evaluating and improving your model</h3>
<p>Measuring predictive performance of your model goes beyond how many predictions were correct. Correct classifications are when the actual label is <em>x</em> and the model predicts a label <em>x</em>. In the real world, documents result in different kinds of errors when a classification isn't correct:</p>
<ul>
<li>False positive - model predicts <em>x</em>, but the file isn't labeled <em>x</em>.</li>
<li>False negative - model doesn't predict label <em>x</em>, but the file in fact is labeled <em>x</em>.</li>
</ul>
<p>These metrics are translated into three measures provided by Azure Language:</p>
<ul>
<li><strong>Recall</strong> - Of all the actual labels, how many were identified; the ratio of true positives to all that was labeled.</li>
<li><strong>Precision</strong> - How many of the predicted labels are correct; the ratio of true positives to all identified positives.</li>
<li><strong>F1 Score</strong> - A function of <em>recall</em> and <em>precision</em>, intended to provide a single score to maximize for a balance of each component</li>
</ul>
<div class="TIP">
<p>Tip</p>
<p>Learn more about the <a data-linktype="external" href="https://aka.ms/language-evaluation-metrics">Azure Language evaluation metrics</a>, including exactly how these metrics are calculated</p>
</div>
<p>With a single label project, you can identify which classes aren't classified as well as others and find more quality data to use in training your model. For multiple label projects, figuring out quality data becomes more complex due to the matrix of possible permutations of combined labels.</p>
<p>For example, let's your model is correctly classifying "Action" games and some "Action and Strategy" games, but failing at "Strategy" games. To improve your model, you'll want to find more high quality and varied summaries for both "Action and Strategy" games, as well as "Strategy" games to teach your model how to differentiate the two. This challenge increases exponentially with more possible classes your model is classifying into.</p>
<h3 id="api-payload">API payload</h3>
<p>Azure Language provides a REST API to build and interact with your model, using a JSON body to specify the request. This API is abstracted into multiple language-specific SDKs, however for this module we'll focus our examples on the base REST API.</p>
<p>To submit a classification task, the API requires the JSON body to specify which task to execute. You'll learn more about the REST API in the next unit, but worth familiarizing yourself with parts of the required body.</p>
<p>Single label classification models specify a project type of <code>customSingleLabelClassification</code>:</p>
<pre><code class="lang-json">{
  "projectFileVersion": "&lt;API-VERSION&gt;",
  "stringIndexType": "Utf16CodeUnit",
  "metadata": {
    "projectName": "&lt;PROJECT-NAME&gt;",
    "storageInputContainerName": "&lt;CONTAINER-NAME&gt;",
    "projectKind": "customSingleLabelClassification",
    "description": "Trying out custom single label text classification",
    "language": "&lt;LANGUAGE-CODE&gt;",
    "multilingual": true,
    "settings": {}
  },
  "assets": {
    "projectKind": "customSingleLabelClassification",
        "classes": [
            {
                "category": "Class1"
            },
            {
                "category": "Class2"
            }
        ],
        "documents": [
            {
                "location": "&lt;DOCUMENT-NAME&gt;",
                "language": "&lt;LANGUAGE-CODE&gt;",
                "dataset": "&lt;DATASET&gt;",
                "class": {
                    "category": "Class2"
                }
            },
            {
                "location": "&lt;DOCUMENT-NAME&gt;",
                "language": "&lt;LANGUAGE-CODE&gt;",
                "dataset": "&lt;DATASET&gt;",
                "class": {
                    "category": "Class1"
                }
            }
        ]
    }
}
</code></pre>
<p>Multiple label classification models specify a project type of <code>customMultiLabelClassification</code></p>
<pre><code class="lang-json">{
  "projectFileVersion": "&lt;API-VERSION&gt;",
  "stringIndexType": "Utf16CodeUnit",
  "metadata": {
    "projectName": "&lt;PROJECT-NAME&gt;",
    "storageInputContainerName": "&lt;CONTAINER-NAME&gt;",
    "projectKind": "customMultiLabelClassification",
    "description": "Trying out custom multi label text classification",
    "language": "&lt;LANGUAGE-CODE&gt;",
    "multilingual": true,
    "settings": {}
  },
  "assets": {
    "projectKind": "customMultiLabelClassification",
    "classes": [
      {
        "category": "Class1"
      },
      {
        "category": "Class2"
      }
    ],
    "documents": [
      {
        "location": "&lt;DOCUMENT-NAME&gt;",
        "language": "&lt;LANGUAGE-CODE&gt;",
        "dataset": "&lt;DATASET&gt;",
        "classes": [
          {
            "category": "Class1"
          },
          {
            "category": "Class2"
          }
        ]
      },
      {
        "location": "&lt;DOCUMENT-NAME&gt;",
        "language": "&lt;LANGUAGE-CODE&gt;",
        "dataset": "&lt;DATASET&gt;",
        "classes": [
          {
            "category": "Class2"
          }
        ]
      }
    ]
  }
}
</code></pre>
</div>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>

    <div class="section">
        <div class="section-header">
            <h2>3. Understand how to build text classification projects</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/3-understand-how-to-build-projects">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/3-understand-how-to-build-projects</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Understand how to build text classification projects</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.understand-how-to-build-projects">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">12 minutes</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div id="module-unit-content">
<p>Custom text classification projects are your workspace to build, train, improve, and deploy your classification model. You can work with your project in two ways: through <strong>Language Studio</strong> and via the REST API. Language Studio is the GUI that will be used in the lab, but the REST API has the same functionality. Regardless of which method you prefer, the steps for developing your model are the same.</p>
<h2 id="azure-language-project-life-cycle">Azure Language project life cycle</h2>
<p><span class="mx-imgBorder">
<a data-linktype="relative-path" href="../../wwl-data-ai/custom-text-classification/media/classify-development-lifecycle.png#lightbox">
<img alt="Diagram that shows a life cycle with steps to define labels, tag data, train model, view model, improve model, deploy model, and classify text." data-linktype="relative-path" src="https://learn.microsoft.com/en-us/training/wwl-data-ai/custom-text-classification/media/classify-development-lifecycle-small.png"/>
</a>
</span>
</p>
<ul>
<li><strong>Define labels</strong>: Understanding the data you want to classify, identify the possible labels you want to categorize into. In our video game example, our labels would be "Action", "Adventure", "Strategy", and so on.</li>
<li><strong>Tag data</strong>: Tag, or label, your existing data, specifying the label or labels each file falls under. Labeling data is important since it's how your model will learn how to classify future files. Best practice is to have clear differences between labels to avoid ambiguity, and provide good examples of each label for the model to learn from. For example, we'd label the game "Quest for the Mine Brush" as "Adventure", and "Flight Trainer" as "Action".</li>
<li><strong>Train model</strong>: Train your model with the labeled data. Training will teach our model what types of video game summaries should be labeled which genre.</li>
<li><strong>View model</strong>: After your model is trained, view the results of the model. Your model is scored between 0 and 1, based on the precision and recall of the data tested. Take note of which genre didn't perform well.</li>
<li><strong>Improve model</strong>: Improve your model by seeing which classifications failed to evaluate to the right label, see your label distribution, and find out what data to add to improve performance. For example, you might find your model mixes up "Adventure" and "Strategy" games. Try to find more examples of each label to add to your dataset for retraining your model.</li>
<li><strong>Deploy model</strong>: Once your model performs as desired, deploy your model to make it available via the API. Your model might be named "GameGenres", and once deployed can be used to classify game summaries.</li>
<li><strong>Classify text</strong>: Use your model for classifying text. The lab covers how to use the API, and you can view the <a data-linktype="external" href="https://aka.ms/ct-runtime-swagger">API reference</a></li>
</ul>
<h2 id="how-to-split-datasets-for-training">How to split datasets for training</h2>
<p>When labeling your data, you can specify which dataset you want each file to be:</p>
<ul>
<li><strong>Training</strong> - The training dataset is used to actually train the model; the data and labels provided are fed into the machine learning algorithm to teach your model what data should be classified to which label. The training dataset will be the larger of the two datasets, recommended to be about 80% of your labeled data.</li>
<li><strong>Testing</strong> - The testing dataset is labeled data used to verify you model after it's trained. Azure will take the data in the testing dataset, submit it to the model, and compare the output to how you labeled your data to determine how well the model performed. The result of that comparison is how your model gets scored and helps you know how to improve your predictive performance.</li>
</ul>
<p>During the <strong>Train model</strong> step, there are two options for how to train your model.</p>
<ul>
<li><strong>Automatic split</strong> - Azure takes all of your data, splits it into the specified percentages randomly, and applies them in training the model. This option is best when you have a larger dataset, data is naturally more consistent, or the distribution of your data extensively covers your classes.</li>
<li><strong>Manual split</strong> - Manually specify which files should be in each dataset. When you submit the training job, the Azure Language service will tell you the split of the dataset and the distribution. This split is best used with smaller datasets to ensure the correct distribution of classes and variation in data are present to correctly train your model.</li>
</ul>
<p>To use the automatic split, put all files into the <em>training</em> dataset when labeling your data (this option is the default). To use the manual split, specify which files should be in testing versus training during the labeling of your data.</p>
<h2 id="deployment-options">Deployment options</h2>
<p>Azure Language allows each project to create both multiple models and multiple deployments, each with their own unique name. Benefits include ability to:</p>
<ul>
<li>Test two models side by side</li>
<li>Compare how the split of datasets impact performance</li>
<li>Deploy multiple versions of your model</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>Each project has a limit of ten deployment names</p>
</div>
<p>During deployment you can choose the name for the deployed model, which can then be selected when submitting a classification task:</p>
<pre><code class="lang-json">&lt;...&gt;
  "tasks": [
    {
      "kind": "CustomSingleLabelClassification",
      "taskName": "MyTaskName",
      "parameters": {
        "projectName": "MyProject",
        "deploymentName": "MyDeployment"
      }
    }
  ]
&lt;...&gt;
</code></pre>
<h2 id="using-the-rest-api">Using the REST API</h2>
<p>The REST API available for the Azure Language service allows for CLI development of Azure Language projects in the same way that Language Studio provides a user interface for building projects. Language Studio is explored further in this module's lab.</p>
<h3 id="pattern-of-using-the-api">Pattern of using the API</h3>
<p>The API for the Azure Language service operates asynchronously for most calls. In each step we submit a request to the service first, then check back with the service via a subsequent call to get the status or result.</p>
<p>With each request, a header is required to authenticate your request:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ocp-Apim-Subscription-Key</code></td>
<td>The key to your Azure Language resource</td>
</tr>
</tbody>
</table>
<h4 id="submit-initial-request">Submit initial request</h4>
<p>The URL to submit the request to varies on which step you are on, but all are prefixed with the endpoint provided by your Azure Language resource.</p>
<p>For example, to train a model, you would create a <strong>POST</strong> to the URL that would look something like the following:</p>
<pre><code class="lang-rest">&lt;YOUR-ENDPOINT&gt;/language/analyze-text/projects/&lt;PROJECT-NAME&gt;/:train?api-version=&lt;API-VERSION&gt;
</code></pre>
<table>
<thead>
<tr>
<th>Placeholder</th>
<th>Value</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;YOUR-ENDPOINT&gt;</code></td>
<td>The endpoint for your API request</td>
<td><code>https://&lt;your-custom-resource&gt;.cognitiveservices.azure.com</code></td>
</tr>
<tr>
<td><code>&lt;PROJECT-NAME&gt;</code></td>
<td>The name for your project (value is case-sensitive)</td>
<td><code>myProject</code></td>
</tr>
</tbody>
</table>
<p>The following body would be attached to the request:</p>
<pre><code class="lang-json">    {
        "modelLabel": "&lt;MODEL-NAME&gt;",
        "trainingConfigVersion": "&lt;CONFIG-VERSION&gt;",
        "evaluationOptions": {
            "kind": "percentage",
            "trainingSplitPercentage": 80,
            "testingSplitPercentage": 20
        }
    }
</code></pre>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;YOUR-MODEL&gt;</code></td>
<td>Your model name.</td>
</tr>
<tr>
<td><code>trainingConfigVersion</code></td>
<td>The model version to use to train your model.</td>
</tr>
<tr>
<td><code>runValidation</code></td>
<td>Boolean value to run validation on the test set.</td>
</tr>
<tr>
<td><code>evaluationOptions</code></td>
<td>Specifies evaluation options.</td>
</tr>
<tr>
<td><code>kind</code></td>
<td>Specifies data split type. Can be <code>percentage</code> if you're using an automatic split, or <code>set</code> if you manually split your dataset</td>
</tr>
<tr>
<td><code>testingSplitPercentage</code></td>
<td>Required integer field only if <code>type</code> is <em>percentage</em>. Specifies testing split.</td>
</tr>
<tr>
<td><code>trainingSplitPercentage</code></td>
<td>Required integer field only if <code>type</code>  is <em>percentage</em>. Specifies training split.</td>
</tr>
</tbody>
</table>
<p>The response to the above request will be a <code>202</code>, meaning the request was successful. Grab the <code>location</code> value from the response headers, which will look similar to the following URL:</p>
<pre><code class="lang-rest">&lt;ENDPOINT&gt;/language/analyze-text/projects/&lt;PROJECT-NAME&gt;/train/jobs/&lt;JOB-ID&gt;?api-version=&lt;API-VERSION&gt;
</code></pre>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;JOB-ID&gt;</code></td>
<td>Identifier for your request</td>
</tr>
</tbody>
</table>
<p>This URL is used in the next step to get the training status.</p>
<h4 id="get-training-status">Get training status</h4>
<p>To get the training status, use the URL from the header of the request response to submit a <strong>GET</strong> request, with same header that provides our Azure Language service key for authentication. The response body will be similar to the following JSON:</p>
<pre><code class="lang-json">{
  "result": {
    "modelLabel": "&lt;MODEL-NAME&gt;",
    "trainingConfigVersion": "&lt;CONFIG-VERSION&gt;",
    "estimatedEndDateTime": "2023-05-18T15:47:58.8190649Z",
    "trainingStatus": {
      "percentComplete": 3,
      "startDateTime": "2023-05-18T15:45:06.8190649Z",
      "status": "running"
    },
    "evaluationStatus": {
      "percentComplete": 0,
      "status": "notStarted"
    }
  },
  "jobId": "&lt;JOB-ID&gt;",
  "createdDateTime": "2023-05-18T15:44:44Z",
  "lastUpdatedDateTime": "2023-05-18T15:45:48Z",
  "expirationDateTime": "2023-05-25T15:44:44Z",
  "status": "running"
}
</code></pre>
<p>Training a model can take some time, so periodically check back at this status URL until the response <code>status</code> returns <code>succeeded</code>. Once the training has succeeded, you can view, verify, and deploy your model.</p>
<h3 id="consuming-a-deployed-model">Consuming a deployed model</h3>
<p>Using the model to classify text follows the same pattern as outlined above, with a POST request submitting the job and a GET request to retrieve the results.</p>
<h4 id="submit-text-for-classification">Submit text for classification</h4>
<p>To use your model, submit a <strong>POST</strong> to the <em>analyze</em> endpoint at the following URL:</p>
<pre><code class="lang-rest">&lt;ENDPOINT&gt;/language/analyze-text/jobs?api-version=&lt;API-VERSION&gt;
</code></pre>
<table>
<thead>
<tr>
<th>Placeholder</th>
<th>Value</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;YOUR-ENDPOINT&gt;</code></td>
<td>The endpoint for your API request</td>
<td><code>https://&lt;your-custom-resource&gt;.cognitiveservices.azure.com</code></td>
</tr>
</tbody>
</table>
<div class="IMPORTANT">
<p>Important</p>
<p>Remember to include your resource key in the header for <code>Ocp-Apim-Subscription-Key</code></p>
</div>
<p>The following JSON structure would be attached to the request:</p>
<pre><code class="lang-json">{
  "displayName": "Classifying documents",
  "analysisInput": {
    "documents": [
      {
        "id": "1",
        "language": "&lt;LANGUAGE-CODE&gt;",
        "text": "Text1"
      },
      {
        "id": "2",
        "language": "&lt;LANGUAGE-CODE&gt;",
        "text": "Text2"
      }
    ]
  },
  "tasks": [
     {
      "kind": "&lt;TASK-REQUIRED&gt;",
      "taskName": "&lt;TASK-NAME&gt;",
      "parameters": {
        "projectName": "&lt;PROJECT-NAME&gt;",
        "deploymentName": "&lt;DEPLOYMENT-NAME&gt;"
      }
    }
  ]
}
</code></pre>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;TASK-REQUIRED&gt;</code></td>
<td>Which task you're requesting. The task is <code>CustomMultiLabelClassification</code> for multiple label projects, or <code>CustomSingleLabelClassification</code> for single label projects</td>
</tr>
<tr>
<td><code>&lt;LANGUAGE-CODE&gt;</code></td>
<td>The language code such as <code>en-us</code>.</td>
</tr>
<tr>
<td><code>&lt;TASK-NAME&gt;</code></td>
<td>Your task name.</td>
</tr>
<tr>
<td><code>&lt;PROJECT-NAME&gt;</code></td>
<td>Your project name.</td>
</tr>
<tr>
<td><code>&lt;DEPLOYMENT-NAME&gt;</code></td>
<td>Your deployment name.</td>
</tr>
</tbody>
</table>
<p>The response to the above request will be a <code>202</code>, meaning the request was successful. Look for the <code>operation-location</code> value in the response headers, which will look something like the following URL:</p>
<pre><code class="lang-rest">&lt;ENDPOINT&gt;/language/analyze-text/jobs/&lt;JOB-ID&gt;?api-version=&lt;API-VERSION&gt;
</code></pre>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;YOUR-ENDPOINT&gt;</code></td>
<td>The endpoint for your API request</td>
</tr>
<tr>
<td><code>&lt;JOB-ID&gt;</code></td>
<td>Identifier for your request</td>
</tr>
</tbody>
</table>
<p>This URL is used to get your task results.</p>
<h4 id="get-classification-results">Get classification results</h4>
<p>Submit a <strong>GET</strong> request to the endpoint from the previous request, with the same header for authentication. The response body will be similar to the following JSON:</p>
<pre><code class="lang-json">{
  "createdDateTime": "2023-05-19T14:32:25.578Z",
  "displayName": "MyJobName",
  "expirationDateTime": "2023-05-19T14:32:25.578Z",
  "jobId": "xxxx-xxxxxx-xxxxx-xxxx",
  "lastUpdateDateTime": "2023-05-19T14:32:25.578Z",
  "status": "succeeded",
  "tasks": {
    "completed": 1,
    "failed": 0,
    "inProgress": 0,
    "total": 1,
    "items": [
      {
        "kind": "customSingleClassificationTasks",
        "taskName": "Classify documents",
        "lastUpdateDateTime": "2022-10-01T15:01:03Z",
        "status": "succeeded",
        "results": {
          "documents": [
            {
              "id": "&lt;DOC-ID&gt;",
              "class": [
                  {
                      "category": "Class_1",
                      "confidenceScore": 0.0551877357
                  }
              ],
              "warnings": []
            }
          ],
          "errors": [],
          "modelVersion": "2022-04-01"
        }
      }
    ]
  }
}
</code></pre>
<p>The classification result is within the items array's <code>results</code> object, for each document submitted.</p>
</div>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>

    <div class="section">
        <div class="section-header">
            <h2>4. Exercise - Classify text</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/4-exercise-classify-text">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/4-exercise-classify-text</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Exercise - Classify text</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.exercise-classify-text">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">35 minutes</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div id="module-unit-content">
<p>In this exercise, you use Azure Language to build a custom text classification model.</p>
<div class="NOTE">
<p>Note</p>
<p>To complete this lab, you need an <strong><a data-linktype="external" href="https://azure.microsoft.com/pricing/purchase-options/azure-account?cid=msft_learn">Azure subscription</a></strong>.</p>
</div>
<p>Launch the exercise and follow the instructions.</p>
<p><a data-linktype="external" href="https://go.microsoft.com/fwlink/?linkid=2322137&amp;azure-portal=true"><img alt="Button to launch exercise." data-linktype="relative-path" src="https://learn.microsoft.com/en-us/training/wwl-data-ai/custom-text-classification/media/launch-exercise.png"/></a></p>
<div class="TIP">
<p>Tip</p>
<p>After completing the exercise, if you've finished exploring Foundry Tools, delete the Azure resources that you created during the exercise.</p>
</div>
</div>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>

    <div class="section">
        <div class="section-header">
            <h2>5. Module assessment</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/5-knowledge-check">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/5-knowledge-check</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Module assessment</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.knowledge-check">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">3 minutes</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div aria-hidden="true" hidden="" id="module-unit-content">
</div>
<h2 aria-hidden="true" hidden="" id="quiz-title">Check your knowledge</h2>
<form aria-hidden="true" aria-label="Knowledge check" class="quiz-form margin-top-xs" data-bi-name="quiz" hidden="" id="question-container" role="form">
<fieldset class="field">
<div role="list">
<div class="quiz-question" data-bi-name="question" role="listitem">
<div aria-labelledby="quiz-question-1" class="quiz-question-title font-size-md margin-top-sm margin-bottom-xs" role="radiogroup">
<div class="margin-top-sm margin-bottom-xs field-label" id="quiz-question-1">
<span class="font-weight-semibold">1.</span>
<p>You want to train a model to classify book summaries by their genre, and some of your favorite books are both mystery and thriller. Which type of project should you build?</p>
<span class="required-indicator"></span>
</div>
<div class="field-body">
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-0-0">
<input class="radio-dot choice-input" id="quiz-choice-0-0" name="0" type="radio" value="0"/>
<div class="margin-inline-sm radio-label-text">
<p>A single label classification project</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-0-1">
<input class="radio-dot choice-input" id="quiz-choice-0-1" name="0" type="radio" value="1"/>
<div class="margin-inline-sm radio-label-text">
<p>A multiple label classification project</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-0-2">
<input class="radio-dot choice-input" id="quiz-choice-0-2" name="0" type="radio" value="2"/>
<div class="margin-inline-sm radio-label-text">
<p>A varied label classification project</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
</div>
</div>
</div>
<div class="quiz-question" data-bi-name="question" role="listitem">
<div aria-labelledby="quiz-question-2" class="quiz-question-title font-size-md margin-top-sm margin-bottom-xs" role="radiogroup">
<div class="margin-top-sm margin-bottom-xs field-label" id="quiz-question-2">
<span class="font-weight-semibold">2.</span>
<p>You just got notification your training job is complete. What is your next step?</p>
<span class="required-indicator"></span>
</div>
<div class="field-body">
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-1-0">
<input class="radio-dot choice-input" id="quiz-choice-1-0" name="1" type="radio" value="0"/>
<div class="margin-inline-sm radio-label-text">
<p>Label more data</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-1-1">
<input class="radio-dot choice-input" id="quiz-choice-1-1" name="1" type="radio" value="1"/>
<div class="margin-inline-sm radio-label-text">
<p>Deploy your model</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-1-2">
<input class="radio-dot choice-input" id="quiz-choice-1-2" name="1" type="radio" value="2"/>
<div class="margin-inline-sm radio-label-text">
<p>View your model details</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
</div>
</div>
</div>
<div class="quiz-question" data-bi-name="question" role="listitem">
<div aria-labelledby="quiz-question-3" class="quiz-question-title font-size-md margin-top-sm margin-bottom-xs" role="radiogroup">
<div class="margin-top-sm margin-bottom-xs field-label" id="quiz-question-3">
<span class="font-weight-semibold">3.</span>
<p>You want to submit a classification task via the API. How do you get the results of the classification?</p>
<span class="required-indicator"></span>
</div>
<div class="field-body">
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-2-0">
<input class="radio-dot choice-input" id="quiz-choice-2-0" name="2" type="radio" value="0"/>
<div class="margin-inline-sm radio-label-text">
<p>The result is in the response of the classification request.</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-2-1">
<input class="radio-dot choice-input" id="quiz-choice-2-1" name="2" type="radio" value="1"/>
<div class="margin-inline-sm radio-label-text">
<p>Call an endpoint with your deployment name to get the most recent classification.</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
<label class="quiz-choice display-flex padding-block-xxs padding-inline-xs margin-bottom-xxs radio" for="quiz-choice-2-2">
<input class="radio-dot choice-input" id="quiz-choice-2-2" name="2" type="radio" value="2"/>
<div class="margin-inline-sm radio-label-text">
<p>Call the URL provided in the header of the request response.</p>
</div>
<div ariahidden="true" class="font-weight-semibold position-absolute right-0 margin-right-md answer-result-indicator" hidden="">
<span class="icon"></span>
<span class="answer-result-text"></span>
</div>
</label>
<div class="quiz-choice-explanation margin-block-xxs font-weight-semibold margin-left-lg">
</div>
</div>
</div>
</div>
</div>
<div class="has-loading-skeleton" id="module-unit-quiz-submit-container"></div>
<p class="font-size-sm color-danger font-weight-semibold margin-top-xxs is-hidden" id="unanswered-question-error" role="alert">You must answer all questions before checking your work.</p>
<p class="visually-hidden" id="screen-reader-text"></p>
</fieldset>
</form>
<form aria-hidden="true" aria-label="Knowledge check" class="margin-top-xs" data-bi-name="module-assessment" hidden="" id="module-assessment-questions-form" role="form">
<fieldset class="field">
<div id="module-assessment-questions-container" role="list"></div>
<div aria-hidden="true" hidden="" id="module-assessment-objectives-container" role="list"></div>
<div id="module-assessment-submit-container"></div>
<p class="font-size-sm color-danger font-weight-semibold margin-top-xxs is-hidden" id="unanswered-module-assessment-question-error" role="alert">You must answer all questions before checking your work.</p>
</fieldset>
</form>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>

    <div class="section">
        <div class="section-header">
            <h2>6. Summary</h2>
            <a href="https://learn.microsoft.com/en-us/training/modules/custom-text-classification/6-summary">https://learn.microsoft.com/en-us/training/modules/custom-text-classification/6-summary</a>
        </div>
        <div class="content"><main class="layout-body-main has-body-background-dark" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
<div data-main-column="">
<!-- Article header -->

<!-- Unit navigation menu -->

<!-- Main content area -->
<div class="content"><div class="modular-content-container has-body-background box">
<div class="section is-uniform position-relative" id="unit-inner-section">
<h1 class="margin-right-xxl-desktop" id="module-unit-title">Summary</h1>
<div class="xp-tag position-absolute top-0 right-0 margin-top-xs margin-top-sm-tablet margin-top-lg-desktop margin-top-xs-interactive margin-right-sm margin-right-lg-tablet margin-right-sm-interactive" data-progress-uid="learn.wwl.custom-text-classification.summary">
<div class="xp-tag-hexagon">
<span class="xp-tag-icon is-shown-complete docon docon-check">
<span class="visually-hidden">Completed</span>
</span>
<span class="xp-tag-xp"></span>
</div>
</div>
<ul class="metadata page-metadata" id="module-unit-metadata">
<li id="module-unit-total-time">1 minute</li>
</ul>
<div aria-hidden="true" hidden="" id="module-unit-module-assessment-message-container"></div>
<div hidden="" id="module-unit-notification-container"></div>
<div id="module-unit-content">
<p>In this module, you learned about custom text classification and how to build a text classification service.</p>
<p>Now that you've completed this module, you can:</p>
<ul>
<li>Understand types of classification projects.</li>
<li>Build a custom text classification project.</li>
<li>Tag data, train, and deploy a model.</li>
<li>Submit classification tasks from your own app.</li>
</ul>
<p>To learn more about the Azure Language service, see the <a data-linktype="absolute-path" href="/en-us/azure/ai-services/language-service/overview">Azure Language service documentation</a>.</p>
</div>
<div class="modular-content-container" hidden="" id="next-section">
</div>
</div>
</div>
</div>
<!-- Feedback area -->
<div class="modular-content-container margin-block-xs">
<section class="feedback-section section is-full-height is-uniform padding-block-none position-relative">
<div class="font-weight-semibold display-none" id="ms--unit-support-message"></div>
<div id="ms--unit-user-feedback">
<!-- feedback section -->

<!-- end feedback section -->
</div>
</section>
</div>
<!-- Interactive footer area -->
</div>
</main></div>
    </div>
</body>
</html>